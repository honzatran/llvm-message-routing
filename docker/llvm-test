# Taken from JitFromScratch repository 
# https://github.com/weliveindetail/JitFromScratch/tree/master/docker
#
#
FROM ubuntu:18.04

# Install tools for apt-add-repository
RUN apt-get update && \
        apt-get install -y --no-install-recommends \
        ca-certificates wget gnupg software-properties-common

# Add LLVM apt repository
RUN wget https://apt.llvm.org/llvm-snapshot.gpg.key && \
    apt-key add llvm-snapshot.gpg.key && \
    apt-add-repository "deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-8 main" && \
    apt-get update

# Install tools and libs for JitFromScratch build
RUN apt-get install -y --no-install-recommends \
    build-essential git cmake cmake-data \
    ninja-build zlib1g-dev llvm-8-dev


# install boost 1.70.0
RUN wget --max-redirect 3 https://dl.bintray.com/boostorg/release/1.70.0/source/boost_1.70.0.tar.gz
RUN mkdir -p /usr/include/boost && tar zxf boost_1.70.0.tar.gz -C /usr/include/boost --strip-components=1

